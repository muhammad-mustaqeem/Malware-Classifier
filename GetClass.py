
from Predictor import PredictInputFile
import os
import pathlib
import fnmatch
import shutil

def delAsmFiles():
    for files in fnmatch.filter(os.listdir('./Input/ASM File/'), "*.asm"):
        os.remove(os.path.join('./Input/ASM File', files))


def moveExeToHistory():
    if not os.path.isdir('./History'):
        pathlib.Path('./History').mkdir(parents=True, exist_ok=True)
    for files in fnmatch.filter(os.listdir('./Input/EXE File/'), "*.exe"):
        shutil.move(os.path.join('./Input/EXE File/', files), os.path.join('./History', files))


def predictUserFile():
    print("Model Predicting...")
    classPredicted = 0
    while(1):
        classPredicted = PredictInputFile()
        fileLength = os.listdir('./Input/ASM File')
        if(len(fileLength) == 0):
            classPredicted = PredictInputFile()
        else:
            classPredicted = PredictInputFile()
            break

    print("Class Predicted: ", classPredicted)
    data = {'1': False, '2': False, '3': False, '4': False, '5': False,
            '6': False, '7': False, '8': False, '9': False, '10': False, }

    classPredicted = str(classPredicted)
    if classPredicted in data.keys():
        data[classPredicted] = True

    delAsmFiles()
    moveExeToHistory()

    return data
